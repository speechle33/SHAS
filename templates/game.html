{% extends "base2.html" %}

{% block title %}Blackjack Game{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1>Blackjack Game</h1>

    <h2>Dealer's Hand</h2>
    <div id="dealer-hand">
        {% for card in state['dealer_hand'] %}
            <img src="{{ card.image }}" alt="{{ card.value }} of {{ card.suit }}">
        {% endfor %}
    </div>
    <h3>Dealer's Score: {{ state['dealer_score'] }}</h3>

    <h2>Your Hand</h2>
    <div id="player-hand">
        {% for card in state['player_hand'] %}
            <img src="{{ card.image }}" alt="{{ card.value }} of {{ card.suit }}">
        {% endfor %}
    </div>
    <h3>Your Score: {{ state['player_score'] }}</h3>

    {% if state['game_over'] %}
        <h3>{{ state['game_message'] }}</h3>
        <form method="get" action="{{ url_for('main.start_game', session_id=session_id) }}">
            <button type="submit" class="btn btn-success mt-3">Play Again</button>
        </form>
        <form method="get" action="{{ url_for('main.index') }}" class="mt-3">
            <button type="submit" class="btn btn-danger">Back to Home</button>
        </form>
    {% else %}
        <form method="post" action="{{ url_for('main.game', session_id=session_id) }}">
            <button name="take_card" value="1" type="submit" class="btn btn-primary">Take Card</button>
        </form>
        <form method="post" action="{{ url_for('main.game', session_id=session_id) }}" class="mt-2">
            <button name="pass" value="1" type="submit" class="btn btn-secondary">Pass</button>
        </form>
    {% endif %}

    <div id="game-over-msg">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-danger mt-3">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>
</div>
{% endblock %}