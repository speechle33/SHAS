<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Blackjack Game</title>
  </head>
  <body>
    <h1>Blackjack Game</h1>
    <div>
      <h2>Dealer's Hand</h2>
      <div id="dealer-hand">{{ state['dealer_hand'] }}</div>
      <h2>Your Hand</h2>
      <div id="player-hand">{{ state['player_hand'] }}</div>
      <button id="hit-button">Hit</button>
      <button id="stand-button">Stand</button>
      <div id="game-status"></div>
    </div>
    <script>
      function updateGameState(state) {
        document.getElementById('dealer-hand').innerHTML = state.dealer_hand.join(', ');
        document.getElementById('player-hand').innerHTML = state.player_hand.join(', ');

        let gameStatus = '';
        if (state.player_score > 21) {
          gameStatus = 'You bust!';
        } else if (state.dealer_score > 21) {
          gameStatus = 'Dealer busts!';
        } else if (state.player_score === 21) {
          gameStatus = 'Blackjack!';
        }

        document.getElementById('game-status').innerHTML = gameStatus;
      }

      document.getElementById('hit-button').addEventListener('click', () => {
        fetch('/hit', { method: 'POST' })
          .then(response => response.json())
          .then(data => updateGameState(data));
      });

      document.getElementById('stand-button').addEventListener('click', () => {
        fetch('/stand', { method: 'POST' })
          .then(response => response.json())
          .then(data => updateGameState(data));
      });
    </script>
  </body>
</html>