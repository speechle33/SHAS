{% extends "base.html" %}

{% block title %}Login{% endblock %}

{% block content %}

<div class="container">
    <div class="row justify-content-center align-items-center h-100">
        <div class="col-12 text-center">
            <h2 style="font-weight: bold;">Login</h2>
            <h4 style="font-size:14px;margin-top:5px; margin-bottom:30px">Welcome, back!</h4>

            <form method="post" action="">
                {{ form.hidden_tag() }}
                <div class="form-group" style="margin-bottom: 0px; width: 200px; margin: 0 auto;">
                    <label style="padding-right:110px;">{{ form.username.label }}</label><br>
                    {{ form.username(class="form-control") }}<br>

                </div>
                <div class="form-group" style="margin-bottom: 8px; width: 200px; margin: 0 auto;">
                    <label style="padding-right:110px;">{{ form.password.label }}</label><br>
                    {{ form.password(class="form-control") }}<br>
                    {% for error in form.password.errors %}
                        <span class="error-message" style="color: red; font-size: 0.8rem;">[{{ error }}]</span>
                    {% endfor %}
                </div>

                <!-- Здесь добавляем проверку ошибок, чтобы они отображались ниже формы ввода пароля -->
                {% if form.username.errors or form.password.errors %}
                    <span class="error-message" style="color: red; font-size: 0.8rem; display: block; margin-top: -10px;">[An incorrect login or password has been entered.]</span>
                {% endif %}

                <button type="submit" class="btn btn-primary" 
                style="margin-right: 0px;width: 142px;height: 37px;margin-bottom: 20px;
                padding-top: 5px;font-weight: bold;background-color: rgba(19, 134, 68, 0.9);
                margin-top: 20px;">Log In</button>
            </form>

            <h3 style="margin-top:10px">New?</h3>
            <button type="button" class="btn btn-primary"
                onclick="window.location.href='{{ url_for('main.register') }}'"
                style="margin-right: 0px;width: 142px;height: 37px;margin-bottom: 20px;
                padding-top: 5px;font-weight: bold;background-color: rgba(255, 255, 255, 0.7);
                margin-top: 10px;">
                Register
            </button>
        </div>
    </div>
</div>
<script>
    // Функция для удаления всех элементов с классом 'error-message' через 8 секунд
    setTimeout(function() {
        let errorMessages = document.querySelectorAll('.error-message');
        errorMessages.forEach(function(message) {
            message.remove();
        });
    }, 5000);
</script>
<style>
    body {
        color: white;
        font-family: Spoof, sans-serif;
    }
</style>

{% endblock %}